var price={},difficulty={},userInput={},results={},$jq=jQuery.noConflict();function calculateCoinsMinedBTC(a){if("TH/s"==a.hashrateUnit)var b=a.hashrate*Math.pow(10,12);else if("GH/s"==a.hashrateUnit)var b=a.hashrate*Math.pow(10,9);else var b=a.hashrate*Math.pow(10,6);return b*(1-a.fee/100)*(1-a.reject/100)*a.reward/(Math.pow(2,32)*a.diff)}function calculateCoinsMinedETH(a){if("TH/s"==a.hashrateUnit)var b=1,c=a.hashrate*Math.pow(10,6);else if("GH/s"==a.hashrateUnit)var b=1e3,c=a.hashrate*Math.pow(10,3);else var b=1e6,c=a.hashrate;return c*b/(a.diff/Math.pow(10,12)/14.8*Math.pow(10,12))*(60/14.8*a.reward)*(1-a.fee/100)*(1-a.reject/100)/60}function calculateCoinsMinedLTC(a){if("TH/s"==a.hashrateUnit)var b=a.hashrate*Math.pow(10,9);else if("GH/s"==a.hashrateUnit)var b=a.hashrate*Math.pow(10,6);else var b=a.hashrate*Math.pow(10,3);return a.reward*b/(49.7*a.diff)/86400}function calculateCoinsMinedZEC(a){if("Sols/s"==a.hashrateUnit)var b=a.hashrate;else if("kSols/s"==a.hashrateUnit)var b=1e3*a.hashrate;return b*(1-a.fee/100)*(1-a.reject/100)/(8192*a.diff)*a.reward}function calculateProfitPerTimeFrame(a,b,c){for(var d={miningProfitH:3600*a,miningProfitD:86400*a,miningProfitW:604800*a,miningProfitM:2628000*a,year:0,miningProfitY:[]},e=Math.abs(1-b/100),f=0;f<=c;f++)0==f?d.miningProfitY[f]=0:1==f?(d.miningProfitY[f]=d.miningProfitM,d.year+=d.miningProfitY[f]):(1<e&&(e*=-1),d.miningProfitY[f]=Math.abs(d.miningProfitY[f-1])*e,13>f&&(d.year+=d.miningProfitY[f]));return d}function calculateCosts(a){return{H:a,D:24*a,W:168*a,M:730*a,Y:8760*a}}function calculateNetProfit(a,b,c,d,e){for(var f={h:b.miningProfitH*d-a.H,d:b.miningProfitD*d-a.D,w:b.miningProfitW*d-a.W,m:b.miningProfitM*d-a.M,y:[],year:0},h=0;h<=c;h++)0==h?f.y[h]=0:(d*=1+e/100,f.y[h]=b.miningProfitY[h]*d-a.M,13>h&&(f.year+=f.y[h]));return f}function calculateROI(a,b,c){for(var d=[],e=0;e<=c;e++)d[e]=0==e?-1*b:d[e-1]+a.y[e];return d}function calculateBE(a,b){for(var c=0,d=0;0<a;)a-=b.y[d],d++;return 2<d?c=30.417*(d-2)+(30.417-30.417*(-1*a/b.y[d])):30.417-30.417*(-1*a/b.y[d-1])}function drawChart(a,b,c){for(var d=[],e=0;e<=a;e++)d[e]=e;var f=document.getElementById("chart").getContext("2d"),g=new Chart(f,{type:"line",data:{datasets:[{label:"Mining revenue/month",data:b,borderColor:"rgba(45, 118, 237, 1)",backgroundColor:"rgba(45, 118, 237, 0.5)"},{label:"Profit $$$",data:c,borderColor:"rgb(255, 239, 22)",backgroundColor:"rgba(255, 239, 22, 0.5)"}],labels:d},options:{scales:{yAxes:[{scaleLabel:{display:!0,labelString:""},ticks:{suggestedMin:c[0],suggestedMax:b[b.length-1]}}],xAxes:[{scaleLabel:{display:!0,labelString:"months"}}]},responsive:!0,events:["click"]}})}$jq(window).on("load",function(){addListeners(),userInput.selectedCurrency=$jq("select[name=currency]").val(),$jq.post("/diffBTC").done(function(a){difficulty.btc=a.difficultyBTC,$jq("#diff").val(difficulty.btc)}),$jq.post("/diffETH").done(function(a){difficulty.eth=a.difficultyETH[0].difficulty}),$jq.post("/diffLTC").done(function(a){difficulty.ltc=a.difficultyLTC}),$jq.post("/diffZEC").done(function(a){difficulty.zec=Math.round(a.difficultyZEC)}),$jq.post("/price").done(function(a){price.btc=a.valueBTC,price.eth=a.valueETH,price.ltc=a.valueLTC,price.zec=a.valueZEC,"BTC"==userInput.selectedCurrency?$jq("#value").val(price.btc):"ETH"==userInput.selectedCurrency?$jq("#value").val(price.eth):"ZEC"==userInput.selectedCurrency?$jq("#value").val(price.zec):$jq("#value").val(price.ltc)}),drawChart(12,0,0),$jq(".drawer").drawer(),$jq("#my_popup").popup({opacity:0.8,transition:"all 0.5s",onopen:function(){$jq("main,h1,h3").css({filter:"blur(5px)","-webkit-filter":"blur(5px)"})},onclose:function(){$jq("main,h1,h3").css({filter:"blur(0px)","-webkit-filter":"blur(0px)"})}}),480>$jq(window).width()&&0==window.scrollY&&$jq("#crtice").hide(),480>$jq(window).width()&&$jq("#crtice").hide(),tippy("[title]",{placement:"left",animation:"scale",duration:500,arrow:!0}),$jq("#my_popup").css({"margin-top":"0"}),$jq("#btcLogo").css({display:"block"})}),$jq(document).scroll(function(){var a=$jq(this).scrollTop();50<a&&480>$jq(window).width()?$jq("#crtice").fadeIn():480>$jq(window).width()&&$jq("#crtice").fadeOut()}),setTimeout(function(){$jq("#welcomeMessage").css({"border-style":"hidden"})},4400),$jq(function(){$jq("[data-toggle=\"tooltip\"]").tooltip()}),$jq("select[name=currency]").change(function(){userInput.selectedCurrency=$jq("select[name=currency]").val(),$jq("input[name=hashrate]").val(""),$jq("#BE").text("0"),$jq(".sols").css({display:"none"}),$jq(".hashes").css({display:"block"}),$jq("#btcLogo").css({display:"none"}),$jq("#ltcLogo").css({display:"none"}),$jq("#ethLogo").css({display:"none"}),$jq("#zecLogo").css({display:"none"}),"BTC"==userInput.selectedCurrency?($jq("#valuta").text("BTC"),$jq("#value").val(price.btc),$jq("input[name=reward]").val("12.5"),$jq("#diff").val(difficulty.btc),$jq("#hashRateUnit").val("TH/s"),$jq("#btcLogo").css({display:"block"})):"ETH"==userInput.selectedCurrency?($jq("#valuta").text("ETH"),$jq("input[name=reward]").val("3"),$jq("#value").val(price.eth),$jq("#diff").val(difficulty.eth),$jq("#hashRateUnit").val("MH/s"),$jq("#ethLogo").css({display:"block"})):"ZEC"==userInput.selectedCurrency?($jq("#valuta").text("ZEC"),$jq("input[name=reward]").val("10"),$jq("#value").val(price.zec),$jq("#diff").val(difficulty.zec),$jq(".hashes").css({display:"none"}),$jq(".sols").css({display:"block"}),$jq("#hashRateUnit").val("Sols/s"),$jq("#zecLogo").css({display:"block"})):($jq("#valuta").text("LTC"),$jq("#value").val(price.ltc),$jq("input[name=reward]").val("25"),$jq("#diff").val(difficulty.ltc),$jq("#hashRateUnit").val("MH/s"),$jq("#ltcLogo").css({display:"block"}))}),$jq("#resetButton").click(function(){userInput.selectedCurrency=$jq("select[name=currency]").val(),$jq("input[name=CoinValueChange]").val("0"),$jq("input[name=diffChange]").val("15"),$jq("input[name=hashrate]").val(""),"BTC"==userInput.selectedCurrency?($jq("#hashrate").val(""),$jq("#valuta").text("BTC"),$jq("#value").val(price.btc),$jq("input[name=reward]").val("12.5"),$jq("#diff").val(difficulty.btc),$jq("#hashRateUnit").val("TH/s"),sendParameters()):"ETH"==userInput.selectedCurrency?($jq("#hashrate").val(""),$jq("#valuta").text("ETH"),$jq("input[name=reward]").val("3.5"),$jq("#value").val(price.eth),$jq("#diff").val(difficulty.eth),$jq("#hashRateUnit").val("MH/s"),sendParameters()):"ZEC"==userInput.selectedCurrency?($jq("#hashrate").val(""),$jq("#valuta").text("ZEC"),$jq("input[name=reward]").val("10"),$jq("#value").val(price.zec),$jq("#diff").val(difficulty.zec),$jq("#hashRateUnit").val("Sols/s"),sendParameters()):($jq("#hashrate").val(""),$jq("#valuta").text("LTC"),$jq("#value").val(price.ltc),$jq("input[name=reward]").val("25"),$jq("#diff").val(difficulty.ltc),$jq("#hashRateUnit").val("MH/s"),sendParameters())});function addListeners(){$jq("#hashRateUnit").change(sendParameters),$jq("input[name=hashrate]").keyup(sendParameters),$jq("input[name=fee]").keyup(sendParameters),$jq("input[name=reject]").keyup(sendParameters),$jq("input[name=reward]").keyup(sendParameters),$jq("input[name=diff]").keyup(sendParameters),$jq("input[name=CoinValueChange]").keyup(sendParameters),$jq("input[name=value]").keyup(sendParameters),$jq("input[name=power]").keyup(sendParameters),$jq("input[name=powerCost]").keyup(sendParameters),$jq("input[name=diffChange]").keyup(sendParameters),$jq("input[name=invest]").keyup(sendParameters),$jq("input[name=time]").keyup(sendParameters)}function sendParameters(){userInput.currency=$jq("#currency").val(),userInput.hashrate=$jq("input[name=hashrate]").val(),userInput.fee=$jq("input[name=fee]").val(),userInput.reject=$jq("input[name=reject]").val(),userInput.reward=$jq("input[name=reward]").val(),userInput.diff=$jq("input[name=diff]").val(),userInput.value=$jq("input[name=value]").val(),userInput.hashrateUnit=$jq("select[name=hashrateUnit]").val(),userInput.power=$jq("input[name=power]").val(),userInput.powerCost=$jq("input[name=powerCost]").val(),userInput.diffChange=$jq("input[name=diffChange]").val(),userInput.invest=$jq("input[name=invest]").val(),userInput.timeFrame=$jq("input[name=time]").val(),userInput.coinValueChange=$jq("input[name=CoinValueChange]").val();var a=userInput.power*userInput.powerCost/1e3;results.miningProfitS="BTC"==userInput.currency?calculateCoinsMinedBTC(userInput):"ETH"==userInput.currency?calculateCoinsMinedETH(userInput):"ZEC"==userInput.currency?calculateCoinsMinedZEC(userInput):calculateCoinsMinedLTC(userInput);var b=calculateProfitPerTimeFrame(results.miningProfitS,userInput.diffChange,userInput.timeFrame),c=calculateCosts(a),d=calculateNetProfit(c,b,userInput.timeFrame,userInput.value,userInput.coinValueChange),e=calculateROI(d,userInput.invest,userInput.timeFrame);if("0"!=userInput.invest){var f=calculateBE(userInput.invest,d);isNaN(f)?$jq("#BE").text("Never"):$jq("#BE").text(f.toFixed(2))}drawChart(userInput.timeFrame,d.y,e),$jq(".h :nth-child(2)").html(b.miningProfitH.toFixed(7)),$jq(".h :nth-child(3)").html((d.h+c.H).toFixed(2)),$jq(".h :nth-child(4)").html(c.H.toFixed(2)),$jq(".h :nth-child(5)").html(d.h.toFixed(2)),$jq(".d :nth-child(2)").html(b.miningProfitD.toFixed(4)),$jq(".d :nth-child(3)").html((d.d+c.D).toFixed(2)),$jq(".d :nth-child(4)").html(c.D.toFixed(2)),$jq(".d :nth-child(5)").html(d.d.toFixed(2)),$jq(".w :nth-child(2)").html(b.miningProfitW.toFixed(4)),$jq(".w :nth-child(3)").html((d.w+c.W).toFixed(2)),$jq(".w :nth-child(4)").html(c.W.toFixed(2)),$jq(".w :nth-child(5)").html(d.w.toFixed(2)),$jq(".m :nth-child(2)").html(b.miningProfitM.toFixed(4)),$jq(".m :nth-child(3)").html((d.m+c.M).toFixed(2)),$jq(".m :nth-child(4)").html(c.M.toFixed(2)),$jq(".m :nth-child(5)").html(d.m.toFixed(2)),$jq(".y :nth-child(2)").html(b.year.toFixed(4)),$jq(".y :nth-child(3)").html((d.year+c.Y).toFixed(2)),$jq(".y :nth-child(4)").html(c.Y.toFixed(2)),$jq(".y :nth-child(5)").html(d.year.toFixed(2))}